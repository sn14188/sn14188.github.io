---
title: "웹 스토리지"
date: 2025-09-29
---
웹의 근간을 이루는 HTTP 프로토콜은 요청-응답이 끝나면 연결을 끊는 Connectionless와, 통신이 종료되면 상태를 저장하지 않는 Stateless의 특성을 가진다.
이 때문에 웹 앱은 유저의 상태를 유지하기 위해 쿠키와 웹 스토리지 같은 전략을 사용하게 되었다.
이번 포스트에서는 웹 스토리지에 대해 살펴보겠다.
<br><br>

## 웹 스토리지
웹 스토리지는 웹사이트가 쿠키의 단점을 보완하며 등장한, 브라우저 내부에 데이터를 저장하는 매커니즘이다.
[Wikipedia](https://en.wikipedia.org/wiki/Web_storage)에서는 웹 스토리지가 쿠키보다 큰 저장 공간을 제공하고, HTTP 헤더에 포함되지 않는다는 장점으로 소개되고 있는데 이 두 가지 특성부터 살펴보겠다.

### 1. 공간
쿠키는 아주 작은 데이터 저장소로, 보통 브라우저마다 약 4KB 수준으로 제한돼있다.
하지만 웹 앱이 점점 커지고 복잡해지면서, 단순한 식별 정보를 넘어 더 많은 상태를 클라이언트 측에 유지할 필요가 생겼다.
<br>
웹 스토리지는 훨씬 넉넉한 저장 공간을 제공한다. 브라우저와 origin마다 보통 5MB 이상을 할당하며, 최신 브라우저에서는 더 큰 용량을 지원하기도 한다.

| 비교 기준 | 웹 스토리지 | 쿠키 |
|-|-|-|
| 보관 기간 | local: 영구적<br> session: 탭/창 닫을 때까지 | 만료 기한 설정 |
| 서버로 자동 전송 | 전송되지 않음 | HTTP 요청에 자동 전송 |
| 용량 | 약 5MB | 약 4KB |
| 설정 방법 | 자바스크립트로만 설정 가능 | 자바스크립트 또는 서버에서 `Set-Cookie` 헤더로 설정 |

### 2. HTTP 헤더
쿠키는 서버와 클라이언트 간의 상태 공유를 위해 고안되었고, HTTP 요청마다 자동으로 전송된다.
<br>
서버가 쿠키를 발급하면, 같은 도메인으로 요청할 때마다 아래와 같이 브라우저가 자동으로 HTTP 헤더에 붙여서 보낸다.
```http
GET /myaccount HTTP/1.1
Host: www.example.com
Cookie: session_id=abc123xyz; user_preference=dark_mode
```
이 방식은 로그인 세션 유지처럼 꼭 필요한 경우에는 유용하지만, 모든 요청에 따라붙기 때문에 리소스가 낭비된다.
<br><br>
반대로 웹 스토리지는 HTTP 요청과 무관하게 브라우저 내부에만 존재하기 때문에, 서버로 자동 전송되지 않고 클라이언트 자바스크립트 코드가 API를 통해 명시적으로 접근해 사용할 수 있다.
```http
GET /myaccount HTTP/1.1
Host: www.example.com
```

```js
localStorage.setItem("session_id", "abc123xyz");
localStorage.setItem("user_preference", "dark_mode");

const sessionId = localStorage.getItem("session_id");
const preference = localStorage.getItem("user_preference");

console.log(sessionId);
console.log(preference);
```
이처럼 웹 스토리지를 사용한다는 것은, 네트워크 부하를 줄이고 클라이언트 측에서만 필요한 데이터를 효율적으로 다룰 수 있다는 것이다.<br>
예시: 다크모드 설정, 폼 입력 임시 저장, 장바구니 임시 데이터, 최근 본 항목 등
<br><br>

## 웹 스토리지 종류
웹 스토리지는 크게 로컬 스토리지와 세션 스토리지로 나눌 수 있다. 두 방식 모두 같은 API를 사용하지만, 데이터의 수명과 범위에서 차이가 있다.

### 1. 로컬 스토리지
- 데이터를 영구적으로 저장한다.
- 브라우저나 컴퓨터를 껐다 켜도 데이터가 남아있다.
- 장기적인 유지가 필요한 클라이언트 측 데이터에 적합하다.

### 2. 세션 스토리지
- 페이지를 새로고침해도 데이터가 유지된다.
- 브라우저 탭이나 창을 닫으면 데이터가 사라진다.
- 일시적인 상태나 임시 데이터 보관에 적합하다.
<br>

## 웹 스토리지 저장 위치
웹 스토리지는 origin을 기준으로 저장된다. 다음 세 가지가 정확히 일치해야만 같은 웹 스토리지를 공유할 수 있다.<br>
1. 프로토콜: `http://www.google.com`과 `https://www.google.com`은 별개의 오리진이다.
2. 도메인: `https://www.google.com`과 `https://mail.google.com`은 별개의 오리진이다.
3. 포트: `https://www.example.com:3000` 과 `https://www.example.com:3001` 은 서로 다른 오리진이다. (일반적으로 생략됨) 
<br>

## 웹 스토리지 사용 시 주의사항
1. 자바스크립트로 누구나 접근할 수 있다. 쿠키는 `httpOnly` 속성으로 직접 조작을 막을 수 있지만 로컬 스토리지는 직접적인 보안 처리가 없다.
2. 중요한 정보는 절대 저장하면 안 된다.
3. 타인이 사용하는 컴퓨터에는 개인정보가 남을 수 있다.
<br>

## 정리
1. 쿠키는 서버와 상태를 공유할 수 있지만 용량이 작고, 모든 요청에 자동 전송되므로 불필요한 리소스 낭비가 발생한다.  
2. 웹 스토리지는 쿠키의 단점을 보완하기 위해 등장했으며, 더 큰 용량을 제공하고 HTTP 요청에 포함되지 않는다.  
3. 웹 스토리지는 브라우저를 닫아도 데이터가 보존되는 로컬 스토리지와, 탭이나 창을 닫을 때 사라지는 세션 스토리지로 나뉜다.
4. 저장 범위는 origin (프로토콜, 도메인, 포트) 단위로 관리된다. 
5. 웹 스토리지는 편리하지만 보안에 취약하므로 민감한 정보 저장은 피해야 한다.
<br><br><br>

*(출처: [Wikipedia](https://en.wikipedia.org/wiki/Web_storage), 코드잇 FESI 11기 강의자료)*
