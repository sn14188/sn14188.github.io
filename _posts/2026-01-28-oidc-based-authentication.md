---
title: "OIDC-based Authentication"
date: 2026-01-28
---

이번 포스트에서는 OAuth와 OIDC의 핵심 개념과, 이 두 표준 프로토콜이 어떻게 사용되는지 흐름을 간단히 살펴봤습니다.
<br><br>

## 인증과 인가

인증과 인가는 로그인과 접근 제어를 설명할 때 자주 함께 등장하지만, 서로 다른 문제를 다룹니다.

- 인증(Authentication)
  - "이 사용자가 누구인가"를 확인하는 과정입니다
  - 사용자가 입력한 이메일과 비밀번호가 올바른지 확인하거나, 외부 인증 제공자를 통해 신원을 검증하는 과정이 여기에 해당합니다

- 인가(Authorization)
  - "이 사용자가 무엇을 할 수 있는가"를 결정하는 과정입니다
  - 인증이 완료된 이후, 특정 데이터나 기능에 접근할 수 있는 권한이 있는지를 판단하는 단계입니다

일상적인 서비스 흐름에서는 인증과 인가가 보통 연속적으로 이루어지지만, 두 개념은 목적과 책임이 명확히 구분됩니다.<br>
OAuth는인가를 표준화한 프로토콜이며, OIDC는 OAuth에 인증 개념을 추가해 사용자 식별을 가능하게 한 프로토콜입니다.

## OAuth

OAuth는 Open Authorization의 약자로, 사용자가 비밀번호와 같은 인증 정보를 제공하지 않고도 특정 앱이 외부 서비스에 저장된 자신의 데이터나 기능에 접근할 수 있도록 권한을 위임하는 표준 프로토콜입니다.

- 접근 권한 위임을 목적으로 합니다
- 이메일이나 비밀번호 같은 인증 정보를 직접 사용하지 않습니다
- 토큰 기반 메커니즘을 통해 접근 권한을 전달합니다

### OAuth 접근 권한 위임 플로우

모바일 앱이 Google 계정과 같은 외부 서비스에 저장된 연락처나 사진에 접근하도록 허용하는 경우를 예로 들 수 있습니다. 이 상황에서 모바일 앱은 해당 리소스를 소유하지 않은 제3자 앱이며, OAuth는 사용자가 이 제3자 앱에 대해 접근 권한을 안전하게 위임할 수 있도록 해줍니다.

1. `유저`: 서비스에서 Google 계정에 저장된 연락처나 사진에 접근하려는 기능을 선택합니다
2. `모바일 앱 프런트엔드`: Google에 "이 사용자의 연락처나 사진 데이터에 접근해도 되는지"에 대한 권한 위임을 요청합니다
3. `Google 인가 서버`: 사용자에게 로그인 화면과 함께 모바일 앱이 요청한 접근 권한을 보여주는 동의 화면을 표시합니다
4. `유저`: Google 계정으로 인증한 뒤, 모바일 앱의 접근 권한 요청을 승인합니다
5. `Google 인가 서버`: 인증 및 권한 승인이 완료되면, 모바일 앱의 `redirect URI`로 리디렉트하며, `Authorization Code`를 발급합니다
6. `모바일 앱 프런트엔드`: 받은 `Authorization Code`를 앱 백엔드로 전달합니다
7. `모바일 앱 백엔드`: `Authorization Code`와 함께 `Client ID`와 `Client Secret`을 사용해 Google에 토큰 발급을 요청합니다
8. `Google 인가 서버`: 모바일 앱 백엔드를 인증한 뒤, 연락처와 사진 데이터 접근에 사용할 수 있는 `Access Token`을 발급합니다
9. `모바일 앱 백엔드`: `Access Token`을 사용해 Google 리소스 서버에 연락처나 사진 데이터를 요청합니다
10. `Google 리소스 서버`: `Access Token`을 검증한 뒤 허용된 범위의 데이터를 모바일 앱에 반환합니다

- `Client ID`: OAuth 서버가 "어떤 앱이 요청했는지" 구분하기 위한 공개 ID입니다
- `Client Secret`: 해당 앱이 진짜임을 증명하기 위해 백엔드에서 사용하는 비밀 키입니다
- `redirect URI`: `Authorization Code`를 돌려받도록 미리 등록해둔 콜백 주소입니다

다만 OAuth는 어디까지 접근할 수 있는지를 정의하는 접근 권한 위임에 초점이 있어 제3자 앱이 요청하는 권한 범위를 설정해야 하며, 사용자 인증까지 포함한 표준화된 흐름을 제공하기 위해 OpenID Connect가 등장하게 되었습니다.

## OIDC

### OpenID

OpenID는 비영리 단체인 OpenID 재단에서 관리하는 인증 프로토콜로, 유저가 하나의 아이디 프로바이더를 통해 여러 웹사이트에 로그인할 수 있도록 해줍니다.<br>
OpenID의 장점 중 하나는 사용자가 개별 웹사이트에 로그인 자격 증명 저장 및 관리를 맡기는 대신 자신의 신원 정보를 직접 관리할 수 있다는 것입니다. 이는 웹사이트가 보안에 취약하거나 사용자가 개인정보 보호를 중요하게 생각하는 경우에 유용합니다.

### OIDC

OpenID Connect는 OpenID 기술의 3세대 버전으로, OAuth 2.0 권한 위임 프레임워크 위에 있는 인증 계층입니다.<br>
이를 통해 인가 서버에서 수행한 인증을 기반으로 최종 사용자의 신원을 확인할 수 있고, REST와 유사한 방식으로 최종 사용자의 프로필 정보를 얻을 수 있습니다.

### OpenID 프로바이더

OpenID Connect에서 인증을 제공하는 주체를 OpenID Connect 프로바이더 또는 OpenID 프로바이더라고 부릅니다.<br>
OpenID 프로바이더는 사용자의 인증을 처리하고, 그 결과로 `ID Token`을 발급하는 역할을 담당합니다. 일반적으로 우리가 사용하는 소셜 로그인 서비스들은 모두 OpenID 프로바이더의 역할을 수행하며, 클라이언트 앱은 이 OpenID 프로바이더에 인증을 위임하는 구조를 가집니다.

### `ID Token`

OAuth와 비교했을 때 OpenID Connect의 핵심 구성 요소는 `ID Token`이라고 할 수 있습니다.<br>
`ID Token`은 인증이 완료된 사용자에 대한 정보를 담고 있으며, 이를 통해 클라이언트는 별도의 사용자 정보 조회 없이도 인증된 사용자를 즉시 식별할 수 있습니다.

- JWT 형식입니다
- 이름, 이메일, 프로필 이미지 등의 사용자 정보를 포함합니다

OAuth에서 발급되는 `Access Token`이 리소스 접근을 위한 권한 증표라면, `ID Token`은 인증 결과 그 자체를 나타내는 토큰이라고 할 수 있습니다.

### OpenID Connect 기반 인증 플로우

OpenID Connect 기반 인증은 OAuth 2.0의 흐름을 그대로 따라가면서 인증에 필요한 정보를 추가로 획득하는 방식입니다.<br>

1. `유저`: 서비스에 접속해 소셜 로그인 등 OpenID Connect 기반 인증을 선택합니다
2. `프런트엔드`: OpenID 프로바이더의 인증 엔드포인트로 리디렉트 요청을 보냅니다
3. `OpenID 프로바이더`: 유저에게 로그인 페이지 제공하고, 이메일과 비밀번호 입력을 통해 인증을 요청합니다
4. `유저`: 자신의 계정 정보를 입력해 OpenID 프로바이더에서 본인 인증을 수행합니다
5. `OpenID 프로바이더`: 서비스 프런트엔드에 `Authorization Code`를 발급합니다
6. `프런트엔드`: 받은 `Authorization Code`를 서비스 백엔드로 전달합니다
7. `백엔드`: `Authorization Code`와 함께 `Client ID`와 `Client Secret`을 사용해 Google에 토큰 발급을 요청합니다
8. `OpenID 프로바이더`: 백엔드 인증이 완료되면 `Access Token`과 `ID Token`을 발급합니다
9. `백엔드`: 백엔드는 `ID Token`을 검증해 사용자를 식별하고, 서비스 내부 세션 또는 자체 토큰을 생성해 프런트엔드에 전달함으로써 로그인을 완료합니다

## Takeaways

1. OAuth는 접근 권한 위임을 위한 프로토콜입니다
2. OpenID Connect는 OAuth의 흐름을 그대로 사용하면서 인증 결과를 `ID Token`으로 추가하는 프로토콜입니다
3. `Access Token`은 리소스 접근 권한을 나타내고, `ID Token`은 사용자가 누구인지를 나타냅니다
4. OpenID Connect 프로토콜을 사용해야 소셜 로그인 등 사용자 식별이 가능한 로그인 흐름을 구성할 수 있습니다
   <br><br>

_출처:<br>
[1] [코드잇 FE 위클리 페이퍼](https://codeit.notion.site/FE-1196fd228e8d8044bc17fa07683461ba?p=1506fd228e8d81a7be7ce05ff925edc3&pm=s)<br>
[2] Wikipedia (["OAuth"](https://en.wikipedia.org/wiki/OAuth), ["OpenID"](https://en.wikipedia.org/wiki/OpenID))<br>_
